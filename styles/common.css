/* ========== Tema & base ========== */
:root{
  --bg:#0f1115; --card:#171a21; --text:#eef2ff; --muted:#9aa3b2;
  --acc:#8ab4ff; --border:#232938;

  /* controlli */
  --ctrl-h:40px;
  --ctrl-br:10px;
  --ctrl-bw:1px;
  --ctrl-bc:#fff;        /* bordo bianco come nell'editor */
}

*{ box-sizing:border-box }
html{ -webkit-text-size-adjust:100%; }
body{
  margin:0; background:var(--bg); color:var(--text);
  font:15px/1.45 'Fredoka',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
}
input,button,select,textarea{ font:inherit; }

/* ========== Header “back” come editor/viewer ========== */
.header{
  display:flex; align-items:center; gap:12px;
  margin:20px 28px 10px;
}
/* Link “Find it here!” (accentato) */
.back{
  color:var(--acc);
  text-decoration:none;
}
.back:hover{ text-decoration:underline; }
.header h1{ margin:0; font-size:20px; font-weight:600; }
/* Riga di testo sotto (stesso stile ovunque) */
.sub{
  color:var(--muted);
  font-size:14px;  /* = editor */
}

/* ========== Label e link “Find it here!” ========== */
/* Label sopra l’input ID (uguale in index + editor) */
.form-label{
  display:inline-block;
  margin:0 0 6px;
  font-weight:600;
  font-size:16px;
  color:var(--muted);
  text-align:left;
}
/* Piccolo boost al link help (come in editor) */
.idhelp{
  font-weight:600;
  letter-spacing:.2px;
  margin-left:4px;
  font-size:14px;
}
@media (min-width:640px){
  .idhelp{ font-size:15px; }
}
.idhelp:hover{ text-decoration:underline; }

/* ========== Shimmer comune (testo lucido) ========== */
.shimmer,
.shimmer *{
  --shine-start:rgba(192,192,192,.8);
  --shine-middle:rgba(255,255,255,1);
  --shine-end:rgba(192,192,192,.8);
  background-image:linear-gradient(120deg,
    var(--shine-start) 40%, var(--shine-middle) 50%, var(--shine-end) 60%
  );
  background-size:200% 100%;
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
  -webkit-text-fill-color: transparent; /* utile anche su Safari */
  animation:shine 8s linear infinite;
  letter-spacing:.2px;
}
@keyframes shine{ 0%{background-position:200% 0} 100%{background-position:-200% 0} }
@media (prefers-reduced-motion:reduce){ .shimmer, .shimmer *{ animation:none!important } }

/* ========== Footer “made by” ========== */
.footer-madeby{
  display:flex; justify-content:center; align-items:center;
  gap:0; margin:12px 0 16px; padding-bottom: env(safe-area-inset-bottom);
  white-space:nowrap;
}
.madeby-link{ display:inline-flex; align-items:center; gap:0; text-decoration:none; color:inherit; }
.madeby-link:hover{ text-decoration:underline; }



/* ========== Controlli & Bottoni (coerenti con editor) ========== */
.control{
  width:100%; height:var(--ctrl-h); padding:0 12px; line-height:var(--ctrl-h);
  border:var(--ctrl-bw) solid var(--ctrl-bc); border-radius:var(--ctrl-br);
  background:#0d1016; color:var(--text); outline:none; appearance:none; -webkit-appearance:none;
}
.control:focus{ box-shadow:0 0 0 2px rgba(138,180,255,.25); }

.btn{
  height:var(--ctrl-h); line-height:var(--ctrl-h);
  padding:0 14px; display:inline-flex; align-items:center; justify-content:center; gap:8px;
  border:1px solid var(--border); border-radius:var(--ctrl-br);
  background:#0d1016; color:var(--text); cursor:pointer; white-space:nowrap;
  font-weight:600;
}
.btn-primary{ background:linear-gradient(180deg,#2b62ff,#2753d7); border:0; color:#fff; }
.btn-outline{
  height:var(--ctrl-h); line-height:var(--ctrl-h);
  padding:0 16px; display:inline-flex; align-items:center; justify-content:center; gap:8px;
  border:var(--ctrl-bw) solid var(--ctrl-bc); border-radius:var(--ctrl-br);
  background:transparent; color:#fff; cursor:pointer; white-space:nowrap; font-weight:500;
  transition:all .2s ease-in-out;
}
.btn-outline:hover:enabled{ background:#fff; color:#000; }
.btn:disabled, .btn-outline:disabled{ opacity:.5; cursor:not-allowed; }

/* ========== Card base condivisa (gallery & viewer) ========== */
.card{
  background:var(--card); border:1px solid var(--border); border-radius:16px;
  overflow:hidden; position:relative; box-shadow:0 10px 30px rgba(0,0,0,.25);
  transition:transform .08s ease, box-shadow .08s ease;
}
.card:hover{ transform:translateY(-2px); box-shadow:0 16px 36px rgba(0,0,0,.35) }
.thumb{ aspect-ratio:1/1; background:#0d1016; }
.thumb img{ width:100%; height:100%; object-fit:cover; display:block }
.meta{ padding:8px 10px; display:flex; align-items:center; justify-content:space-between; gap:8px; border-top:1px solid var(--border) }
.open{
  font-size:12px; border-radius:9px; padding:6px 10px;
  border:1px solid var(--border); background:#0d1016; color:var(--text); text-decoration:none;
}

/* ========== Chips base ========== */
.chip{ background:#0d1016; border:1px solid var(--border); color:var(--muted); padding:6px 10px; border-radius:999px; font-size:12px }
/* ========== ID row condivisa (preview SX + input con X + bottone) ========== */
:root{ --id-width:136px; } /* 5 cifre comode; regola se vuoi più largo */

.id-row{
  display:grid;
  grid-template-columns: auto var(--id-width) auto;
  gap:10px;
  align-items:center;
  justify-content:center;
}

/* Input numerico “ID” */
.id-input{
  width:var(--id-width);
  height:40px;
  padding:0 12px;
  border-radius:10px;
  border:1px solid var(--border);
  background:#0d1016;
  color:var(--text);
  font-size:16px;
  font-variant-numeric:tabular-nums;
  text-align:center;
}
.id-input.error{ border-color:#ff4d4f; box-shadow:0 0 0 2px rgba(255,77,79,.2); }

/* Wrapper per la X interna (stile come Trait Viewer) */
.input-clear{ position:relative; }
.input-clear .id-input{ padding-right:34px; }
.clear-btn{
  position:absolute; right:8px; top:50%; transform:translateY(-50%);
  width:32px; height:32px; padding:0; border:0; background:transparent;
  border-radius:0; display:none; cursor:pointer;
}
.clear-btn.show{ display:block; }
.clear-btn::before{
  content:""; position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
  width:14px; height:14px;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"><path d="M1 1L13 13M13 1L1 13" stroke="%23b8bec9" stroke-width="2" stroke-linecap="round"/></svg>')
             no-repeat center;
  opacity:.85;
}
.clear-btn:hover::before{ opacity:1; }
.clear-btn:focus-visible{ outline:2px solid #2b62ff; outline-offset:2px; border-radius:6px; }

/* Mini-anteprima tonda a sinistra */
.id-preview{
  width:40px; height:40px; border-radius:50%; overflow:hidden;
  border:1px solid var(--border); background:#0d1016;
  box-shadow:0 6px 16px rgba(0,0,0,.25); position:relative;
}
.id-preview img{ width:100%; height:100%; object-fit:cover; object-position:50% 35%; display:block; }
.id-preview .id-badge{
  position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
  font:600 12px/1 'Fredoka',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  color:var(--muted);
}
.id-preview.loading::after{
  content:""; position:absolute; inset:0;
  background:linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.14), rgba(255,255,255,0.06));
  background-size:200% 100%; animation:shine 1.8s linear infinite;
}
/* contenitore ID: label a sinistra, riga centrata (stili base in common.css) */
  .hero-id{ display:inline-flex; flex-direction:column; align-items:center; }
  .hero-id .form-label{ align-self:flex-start; margin:0 0 6px; }
  .hero-id-row{
    display:flex;
    align-items:center;
    justify-content:center;
    gap:8px;
  }

  .id-error{ margin:6px 0 0; color:#ff8082; font-size:13px; text-align:center; }

  /* Popover del bottone (solo qui) */
  .id-cta{ position:relative; display:flex; align-items:center; }
  .id-btn{
    height:40px; padding:0 14px; margin:0; border-radius:10px; border:1px solid var(--border);
    background:var(--acc); color:#0f1115; font-weight:700; font-family:'Fredoka',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    cursor:pointer; transition:transform .05s ease, filter .15s ease, opacity .15s;
  }
  .id-btn:hover{ filter:brightness(1.1); }
  .id-btn:active{ transform:translateY(1px); }
  .id-btn:disabled{ opacity:.45; cursor:not-allowed; }
  .popover{
    position:absolute; right: calc(100% + 10px); top:50%; transform: translateY(-50%) translateX(8px);
    z-index:1000; padding:8px 12px; border-radius:10px; border:1px solid var(--border);
    background: color-mix(in oklab, var(--card) 92%, transparent);
    box-shadow:0 8px 24px rgba(0,0,0,.35); white-space:nowrap; color:var(--text);
    font:600 13px/1.2 'Fredoka',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; opacity:0; pointer-events:none;
  }
  .popover::after{
    content:""; position:absolute; left:100%; top:50%; transform: translateY(-50%);
    width:0; height:0; border-top:6px solid transparent; border-bottom:6px solid transparent;
    border-left:6px solid var(--card); filter: drop-shadow(1px 0 0 var(--border));
  }
  .popover.show{
    animation: popInLeft .18s ease-out, popHold 1.6s linear .18s, popOutLeft .22s ease-in 1.78s forwards;
  }
  @keyframes popInLeft { from{opacity:0; transform:translateY(-50%) translateX(12px);} to{opacity:1; transform:translateY(-50%) translateX(0);} }
  @keyframes popHold { from{opacity:1} to{opacity:1} }
  @keyframes popOutLeft { to{opacity:0; transform:translateY(-50%) translateX(12px);} }

